import java.io.IOException;
import java.net.InetAddress;
import java.net.UnknownHostException;

/**
 * This is the main program for each greenhouse for the Greenhouse Monitoring System. 
 * This program creates the threads: DataReceiveTransmit and CommandReceiveExecute, and 
 * the GreenhouseData data structure. 
 * 
 * @author Danilo Vucetic
 *
 */

public class GreenhouseMain {

	public static void main (String []args) throws IOException{
		//Start both threads here, create the data structure as well. 
		
		//These are the ports and addresses required for communications between the Pi's
		int serverPort; //port of the server
		InetAddress serverIP = InetAddress.getLocalHost(); //IP address of the server
		int commandPort; // the port for the CommandReceiveExecute thread
		int dataPort; // the port for the DataReceiveTransmit thread
		
		//Creating the data structure which will be passed to the threads
		GreenhouseData grd = new GreenhouseData();
		grd.setFanActive(true);
		grd.setRelativeHumidity(0);
		grd.setTemperature(-1);
		
		Thread data = new Thread(new DataReceiveTransmit(grd, dataPort, serverPort, serverIP), "DRT");
		Thread com = new Thread(new CommandReceiveExecute(grd, commandPort, serverPort, serverIP), "COM");
		data.start();
		com.start();
		
		
		
	}
}
